"use strict";var _createClass=function(){function e(n,i){for(var s=0;s<i.length;s++){var e=i[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(n,i,s){return i&&e(n.prototype,i),s&&e(n,s),n}}();function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}define(["jquery","jquerycookie"],function(t){return{init:function(){function n(){_classCallCheck(this,n),this.sid=location.href.split("?").splice(1)[0].split("=")[1],this.cookienums=[],this.cookiesids=[],this.num=0}(new(_createClass(n,[{key:"init",value:function(){this.getSid(),t(document).on("mousedown",function(n){if("IMG"==((n=n||event).target||n.srcElement).nodeName)return!1})}},{key:"getSid",value:function(){var e=this;t.ajax({type:"post",url:"http://10.31.152.53/zol/php/detail.php",data:"sid="+this.sid}).done(function(n){var i=(n=JSON.parse(n)).icons.split(",");t(".goos_xiangq").html(' \n                    <div class="imgc">\n                        <div class="big_img">\n                        </div>\n                        <div class="samil_img">\n                            <div class="img_con">\n                            </div>\n                            <div class="img_bn">\n                                <span class="left"></span>\n                                <span class="right"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="deploy">\n                        <div class="deploy_title">\n                            '+n.title+'\n                        </div>\n                        <div class="deploy_price">\n                            <span class="span1">\n                                价\n                                <span>格</span>\n                            </span>\n                            <span class="span2">\n                                ￥\n                                <span>'+n.price+'</span>\n                            </span>\n                        </div>\n                        <div class="shul">\n                            <span class="span1">\n                                数\n                                <span>量</span>\n                            </span>\n                            <div class="jushu">\n                                <p><a href="javascript:;">-</a></p>\n                                <p>1</p>\n                                <p><a href="javascript:;">+</a></p>\n                            </div>\n                        </div>\n                        <div class="wares_btn">\n            \n                            <button class="jiaru"> <a href="javascript:;" style="color: #fff;">加入购物车</a></button>\n                        </div>\n                    </div>'),t(".ti").text(n.title);var s="";t(i).each(function(n,i){s+=0==n?' <p class="a_red"><img src='+i+' alt=""></p>':4==n?' <p style="margin:0;"><img src='+i+' alt=""></p>':" <p><img src="+i+' alt=""></p>'}),t(".big_img").html(s),t(".img_con").html(s),e.jiaru(),e.btnClick(),e.changeNum(),e.skip()})}},{key:"jiaru",value:function(){t(".jiaru").on("click",function(){window.location.href="cart.html"})}},{key:"btnClick",value:function(){var s=this;t(".right").on("click",function(){s.num!=t(".img_con p").length-1&&(s.num++,t(".big_img").stop(!0).animate({left:-450*s.num}),t(".img_con p").eq(s.num).addClass("a_red").siblings("p").removeClass("a_red"),console.log(s.num))}),t(".left").on("click",function(){0==s.num?retun:(s.num--,t(".big_img").stop(!0).animate({left:-450*s.num}),t(".img_con p").eq(s.num).addClass("a_red").siblings("p").removeClass("a_red")),console.log(s.num)}),t(".img_con p").each(function(n,i){t(i).on("click",function(){s.num=n,t(".big_img").stop(!0).animate({left:-450*s.num}),t(".img_con p").eq(s.num).addClass("a_red").siblings("p").removeClass("a_red")})})}},{key:"changeNum",value:function(){t(".jushu p:nth-child(1)").on("click",function(){var n=t(".jushu p:nth-child(2)").text()-1;0!=n&&t(".jushu p:nth-child(2)").text(n)}),t(".jushu p:nth-child(3)").on("click",function(){var n=parseInt(t(".jushu p:nth-child(2)").text())+1;0!=n&&t(".jushu p:nth-child(2)").text(n)})}},{key:"skip",value:function(){var i=this;t(".wares_btn").on("click",function(){t.cookie("cookienums")&&t.cookie("cookiesids")?(i.cookienums=t.cookie("cookienums").split(","),i.cookiesids=t.cookie("cookiesids").split(",")):(i.cookiesids=[],i.cookienums=[]);var n=i.sid;-1===i.cookiesids.indexOf(n)?(i.cookiesids.push(i.sid),t.cookie("cookiesids",i.cookiesids,{expires:7,path:"/"}),i.cookienums.push(parseInt(t(".jushu p:nth-child(2)").text()))):i.cookienums[i.cookiesids.indexOf(n)]=parseInt(i.cookienums[i.cookiesids.indexOf(n)])+parseInt(t(".jushu p:nth-child(2)").text())+"",t.cookie("cookienums",i.cookienums,{expires:7,path:"/"})})}}]),n)).init()}}});